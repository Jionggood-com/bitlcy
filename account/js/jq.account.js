$(document).on("click",".inputbox",function(){$(this).find(".tips").hide(200,function(){$(this).find(".tips").remove();});});function checkboxClick(obj){if($(obj).hasClass('checkbox_off_active')){return false;} if($(obj).hasClass('checkbox_on')){$(obj).removeClass('checkbox_on');$(obj).addClass('checkbox_on_active');}else{$(obj).removeClass('checkbox_on_active');$(obj).addClass('checkbox_on');}} $(document).on("click",".checkbox_on",function(){checkboxClick(this);});$(document).on("click",".checkbox_on_active",function(){checkboxClick(this);});function inputNotice(obj,msg){obj.after('<span class="tips"><i></i>'+msg+'</span>');} function delInputNotice(input){input.nextAll('.tips').remove();} var zValidate={};zValidate.email=function(email){var myreg=/^[\w-']+([\.\+][\w-']+)*@([a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*?\.[a-zA-Z]{2,6}|(\d{1,3}\.){3}\d{1,3})(:\d{4})?$/;return myreg.test(email.replace(/(^\s*)|(\s*$)/g,""));};zValidate.int=function(int){var myreg=/^[0-9]*[1-9][0-9]*$/;return myreg.test(int);};zValidate.float=function(float){var myreg=/^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$/;return myreg.test(float);};zValidate.url=function(url){var myreg=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return myreg.test(url);};zValidate.password=function(password){var myreg=/^(.*){6,}$/;return myreg.test(password);};var regUrl=/.+\.+/;$(document).on("paste","form#ShortenForm .inputchang",function(e){var o=$(this);setTimeout(function(){CheckShortenForm(o.parent(),o.val());},500);});function CheckShortenForm(obj,val) {$(obj).css("background","red");if($(obj).find(".btn").hasClass("loading")){return false;} if($(obj).parent().find(".error_url").length>0){return false;} $(".shorten_actions").remove();var status=false;var val=val;var msg=$(obj).find(".inputchang").attr("msg");if(!val) {var status=true;$(obj).after('<div class="error_url">'+msg+'</div>');$(".error_url").animate({top:'0',bottom:'0'});setTimeout(function(){$(".error_url").animate({top:'-60px',bottom:'60px',opacity:"0"});setTimeout(function(){$(".error_url").remove();},500);},1000);} else {if(!regUrl.test(val)){var status=true;$(obj).after('<div class="error_url">'+msg+'</div>');$(".error_url").animate({top:'0',bottom:'0'});setTimeout(function(){$(".error_url").animate({top:'-60px',bottom:'60px',opacity:"0"});setTimeout(function(){$(".error_url").remove();},500);},1000);}} if(status) {return false;} $(obj).find(".btn").addClass("loading");var shortnum=randomWord(8);var html=''+'<div id="shortened_info" class="shorten_list">'+'<h4 class="separator"><span>Done! You have created your Bitlink</span></h4>'+'<ul class="link_list">'+'<li>'+'<span class="favicon"><img src="images/1QnVFTo.png"></span>'+'<span class="newlink"><a href="https://bitlcy.com/'+shortnum+'">https://bitly.com/'+shortnum+'</a><a href="javascript:;" class="copy">Copy</a></span>'+'<span class="origin"><a href="'+val+'">'+val+'</a></span>'+'</li>'+'</ul>'+'</div>';$(obj).after('<div class="shorten_actions"><i>×</i><a href="https://bitlcy.com/'+shortnum+'" id="shortened_url"><a class="copy" href="javascript:;">Copy</a></div>');$(".shorten_actions").show();$("#ShortenForm .inputchang").val('https://bitlcy.com/'+shortnum);if($("#shortened_info").length>0) {$("#shortened_info").find("li").clone().appendTo($("#shortened_info").next().find(".link_list"));$("#shortened_info").remove();} $(".shorten_list").before(html);$("#shortened_info").slideDown(500);$(obj).find(".btn").removeClass("loading");autocopy();return false;} $("form#ShortenForm").submit(function(){CheckShortenForm($(this),$(this).find(".inputchang").val());return false;});$(document).on("click",".shorten_actions i",function(){$("#ShortenForm .inputchang").val('');$(this).parent().remove();});$("#ShortenForm .inputchang").keyup(function(){var val=$(this).val();if($(".shorten_actions").length>0) {var old_url=$(".shorten_actions a").eq(0).attr("href");(val==old_url)?$(".shorten_actions").show():$(".shorten_actions").hide();}});function randomWord(num){　　var num;　　var char='ABCDEFGHJKLMNOPQRSTUVWXYZabcdefhijklmnopqrstuvwxyz0123456789';　　var maxChar=char.length;　　var str='';　　for(i=0;i<num;i++){　　　　str+=char.charAt(Math.floor(Math.random()*maxChar));　　} 　　return str;} function validateInput(input){var validate=true;var o=$(input);var val=o.val();var type=o.attr('type');var rule=o.attr('rule');var task=o.parents("form").attr('task');delInputNotice(o);if(!val) {var validate=false;var empty_msg=o.attr('empty_msg');if(typeof(empty_msg)=='undefined'){empty_msg=o.attr('msg');} inputNotice(o,empty_msg);} else{if(rule=='email'){if(!zValidate.email(val)){validate=false;inputNotice(o,o.attr('msg'));}}else if(rule=='password'){if(!zValidate.password(val)||val.length<6){validate=false;inputNotice(o,o.attr('msg'));}}else if(rule=='username'){if(!zValidate.password(val)||val.length<3){validate=false;inputNotice(o,o.attr('msg'));}}} var equal=o.attr('equal');if(typeof(equal)!='undefined'&&equal.length>0){if($('#'+equal).val()!=val){validate=false;inputNotice(o,o.attr('equal_msg'));}} return validate;} function submitLoginPannel(form){var o=$(form);var task=o.attr('task');var validate=true;o.find(".timeout").remove();o.find(".tips").remove();if(o.find('.submit .btn').hasClass('loading')){return false;} if(task=='saveProfile') {var oEmail=o.find($('input[name="email"]'));var emailVal=oEmail.val();if(!emailVal) {var validate=false;inputNotice(oEmail,oEmail.attr("msg"));} else{if(!zValidate.email(emailVal)){validate=false;inputNotice(oEmail,oEmail.attr("msg"));}} var ExistingPassword=o.find('input[name="ExistingPassword"]');var ExistingPasswordVal=ExistingPassword.val();var NewPassword=o.find('input[name="NewPassword"]');var NewPasswordVal=NewPassword.val();var ConfirmPassword=o.find('#confirm_password');var ConfirmPasswordVal=ConfirmPassword.val();var equal=NewPassword.attr('equal');if(NewPasswordVal.length>0||ConfirmPasswordVal.length>0) {if(!ExistingPasswordVal) {validate=false;inputNotice(ExistingPassword,ExistingPassword.attr('msg'));} if(ConfirmPasswordVal.length>0&&NewPasswordVal.length>0) {if(ExistingPasswordVal.length<6) {validate=false;inputNotice(ExistingPassword,ExistingPassword.attr('msg'));} if(ConfirmPasswordVal!=NewPasswordVal) {validate=false;inputNotice(NewPassword,NewPassword.attr('equal_msg'));} else{if(ConfirmPasswordVal.length<6){validate=false;inputNotice(NewPassword,NewPassword.attr('msg'));}}} else{validate=false;inputNotice(NewPassword,NewPassword.attr('equal_msg'));}}} else{o.find('.validate').each(function(){if(!validateInput(this)){validate=false;}});} if(!validate){return false;} if(!$('input[name="NewPassword"]').val()&&!$('#confirm_password').val()) {o.parents(".change_profile").removeClass("open");return false;} o.find('.submit .btn').addClass("loading");setTimeout(function(){o.find('.submit .btn').removeClass("loading");},5000);return false;} $(document).on("click",".loginPannel .validate",function(){if($(this).parents(".change_profile").hasClass("open")) {$(this).parent().siblings(".submit").show();}});;grid_yaxis_tracker();function grid_yaxis_tracker(){var clicks=[];var _clicks=[];$(".grid_yaxis_tracker b").each(function(){if($(this).parents(".clicks_box").length>0) {_clicks.push($(this).find("i").attr("clicks"));} else {clicks.push($(this).find("i").attr("clicks"));}});clicks.sort(function(clicks1,clicks2){return clicks2-clicks1;});_clicks.sort(function(_clicks1,_clicks2){return _clicks2-_clicks1;});var maxNum=clicks[0];var _maxNum=_clicks[0];var maxNumAuto=5;var maxX=Math.ceil(maxNum/maxNumAuto);var _maxNumAuto=5;var _maxX=Math.ceil(_maxNum/_maxNumAuto);if(maxNum<maxNumAuto*maxX+1) {maxNumAuto=5;} if(maxNum<maxNumAuto*maxX+1){maxNumAuto=maxNumAuto*maxX;} if(_maxNum<_maxNumAuto*_maxX+1) {_maxNumAuto=5;} if(_maxNum<_maxNumAuto*_maxX+1){_maxNumAuto=_maxNumAuto*_maxX;} var maxCountry=$(".highcharts_timezone .legend u").children().eq(1).children().length;for(var i=0;i<maxCountry;i++){$(".highcharts_grid .grid_svg").append('<g class="c'+i+'"></g>');} $(".highcharts_grid").each(function(){if($(this).parents(".clicks_box").length>0){$(this).find(".grid_yaxis_num").empty();if(_maxNum<_maxNumAuto+1) {var l=_maxNumAuto/5;for(var i=0;i<6;i++) {$(this).find(".grid_yaxis_num").prepend('<i>'+l*i+'</i>');}}} else{$(this).find(".grid_yaxis_num").empty();if(maxNum<maxNumAuto+1) {var l=maxNumAuto/5;for(var i=0;i<6;i++) {$(this).find(".grid_yaxis_num").prepend('<i>'+l*i+'</i>');}}}});$(".highcharts_grid .grid_line i").each(function(){var i_length=$(this).parent().find("i").length;if($(this).parents(".clicks_box").length>0) {var gridLineHeight=$(this).parent().outerHeight();$(this).css({"padding-top":(gridLineHeight-i_length)/(i_length*2-1),"padding-bottom":(gridLineHeight-i_length)/(i_length*2-1)});$(this).parents(".highcharts_grid").find(".grid_yaxis_num i").css({"height":(gridLineHeight-i_length)/(i_length*2-1)*2+1,"line-height":1+(gridLineHeight-i_length)/(i_length*2-1)*2+'px'});$(this).parents(".highcharts_grid").find(".grid_yaxis_tracker").css({"top":$(".grid_yaxis_num i").height()/2,"height":$(".grid_yaxis_num i").height()*5});} else{var gridLineHeight=$(this).parent().outerHeight();$(this).css({"padding-top":(gridLineHeight-i_length)/(i_length*2-1),"padding-bottom":(gridLineHeight-i_length)/(i_length*2-1)});$(this).parents(".highcharts_grid").find(".grid_yaxis_num i").css({"height":(gridLineHeight-i_length)/(i_length*2-1)*2+1,"line-height":1+(gridLineHeight-i_length)/(i_length*2-1)*2+'px'});$(this).parents(".highcharts_grid").find(".grid_yaxis_tracker,.grid_svg").css({"top":$(".grid_yaxis_num i").height()/2,"height":$(".grid_yaxis_num i").height()*5});}});var grid_lineLength=$(".highcharts_grid .grid_line").find("i").length;$(".grid_yaxis_tracker b").each(function(){var trackerClicks=$(this).find("i").attr("clicks");if($(this).find("i").attr("fill")=="1") {if($(this).parents(".clicks_box").length>0) {$(this).find("i").animate({"height":trackerClicks*$(this).height()/_maxNumAuto});} else {$(this).find("i").animate({"height":trackerClicks*$(this).height()/maxNumAuto});}}});$(document).on("mouseenter",".grid_yaxis_tracker b",function(){var _top=$(this).parents(".highcharts_grid").outerHeight();var _left=$(this).offset().left;var clicks=$(this).find("i").attr("clicks");var date=$(this).parent().siblings(".grid_date_labels").children().eq($(this).index()).text();$(this).parents(".highcharts_grid").find(".grid_tooltip strong").remove();$(this).parents(".highcharts_grid").find(".grid_tooltip").show().stop().animate({"left":_left-$(this).parents(".highcharts_grid").find(".grid_tooltip").outerHeight(),"top":_top},500);if($(this).parents(".clicks_box").length>0) {$(this).parents(".highcharts_grid").find(".grid_tooltip").show().stop().animate({"left":_left-$(this).parents(".clicks_box").offset().left+($(this).outerWidth()-$(this).parents(".highcharts_grid").find(".grid_tooltip").outerWidth())/2,"top":_top-30},500);} $(this).parents(".highcharts_grid").find(".grid_tooltip").find(".clicks i").text(clicks);if($(this).parents(".highcharts_grid").prev().find("span").hasClass("active")&&clicks>0) {var index=$(this).parents(".highcharts_grid").prev().find(".active").index();var legend=$(".highcharts_timezone .legend u").children().eq(index);var num=$(this).find("i").attr("c0");var channels=$(this).find("i").attr("channels");var maxCountry=$(".highcharts_timezone .legend u").children().eq(1).children().length;if($(this).parents(".highcharts_grid").prev().find(".location").hasClass("active")){if(clicks-num>0) {for(var i=0;i<maxCountry;i++){if($(this).find("i").attr("c"+i)!=0){$(this).parents(".highcharts_grid").find(".grid_tooltip").append('<strong><span><u style="background:'+legend.find("span").eq(i).find("em").css("backgroundColor")+'"></u>'+legend.find("span").eq(i).text()+': <i>'+$(this).find("i").attr("c"+i)+'</i></span></strong>');}}} else if(num=clicks){$(this).parents(".highcharts_grid").find(".grid_tooltip").append('<strong><span><u style="background:'+legend.find("span").eq(0).find("em").css("backgroundColor")+'"></u>'+legend.find("span").eq(0).text()+' <i>: '+num+'</i></span></strong>');} else if(num=0){for(var i=0;i<maxCountry;i++){if($(this).find("i").attr("c"+i)!=0){$(this).parents(".highcharts_grid").find(".grid_tooltip").append('<strong><span><u style="background:'+legend.find("span").eq(i).find("em").css("backgroundColor")+'"></u>'+legend.find("span").eq(i).text()+': <i>'+num+'</i></span></strong>');}}}} else {if(clicks-channels>0&&channels!=0) {$(this).parents(".highcharts_grid").find(".grid_tooltip").append('<strong><span><u style="background:'+legend.find("span").eq(0).find("em").css("backgroundColor")+'"></u>'+legend.find("span").eq(0).text()+': <i>'+channels+'</i></span><span><u style="background:'+legend.find("span").eq(1).find("em").css("backgroundColor")+'"></u>'+legend.find("span").eq(1).text()+' <i>'+(clicks-channels)+'</i></span></strong>');} else if(channels=clicks){$(this).parents(".highcharts_grid").find(".grid_tooltip").append('<strong><span><u style="background:'+legend.find("span").eq(0).find("em").css("backgroundColor")+'"></u>'+legend.find("span").eq(0).text()+': <i>'+channels+'</i></span></strong>');} else if(channels==0){$(this).parents(".highcharts_grid").find(".grid_tooltip").append('<strong><span><u style="background:'+legend.find("span").eq(1).find("em").css("backgroundColor")+'"></u>'+legend.find("span").eq(1).text()+': <i>'+clicks+'</i></span></strong>');}}} $(this).parents(".highcharts_grid").find(".grid_tooltip").find(".date").text(date);});$(document).on("mouseleave",".grid_yaxis_tracker b",function(){$(".grid_tooltip").hide();});$(".highcharts_grid_scroll .dateline b").each(function(){var length=$(this).parent().find("b").length;if(length>15) {$(this).parents(".highcharts_grid_scroll").find("b").css("width",parseInt($(".highcharts_grid_scroll").width()/15));$(this).parents(".highcharts_grid_scroll").find("span").css("width",parseInt($(".highcharts_grid_scroll").width()/15*length));} else{$(this).parents(".highcharts_grid_scroll").find("b").css("width",parseInt($(".highcharts_grid_scroll").width()/length));}});} $(document).off("click",'.checkbox_on');$(document).off("click",'.checkbox_on_active');(function($){$.ShortenItem={menu_bar:function(o){var o=$(o);$(".profile_item").addClass("open");},eidt_profile:function(o){o.parents(".profile_item").find(".change_profile").addClass("open");},_filter:function(o){$(".profile_item").addClass("open");$(".profile_item .profile_box").css("transform","translateX(0)");$(".profile_item .filter_box").addClass("open");},filter_tag_check:function(o){checkboxClick(o.find("span"));o.siblings(".submit").show();},filter_edittag_check:function(o){checkboxClick(o.find("span"));o.parents("dl").find("dd.submit").show();if(o.hasClass("create_now_tag")) {o.remove();} if(o.hasClass("create_new_tag")) {o.parent().prev().find("input").val('');o.siblings().show();o.removeClass("create_new_tag").addClass("create_now_tag");}},filter_tag_apply:function(o){var checkBoxCount=0;$(".filter_list").find(".filter_list_pill").remove();$(".grid_yaxis_tracker b i").removeClass("active");o.parents("dl").find("dd:not('.submit')").each(function(){if($(this).find("span").hasClass('checkbox_on_active')) {val=$(this).attr("data-reactid");checkBoxCount++;$(".filter_list_clear").before('<div class="filter_list_pill" data-reactid="'+val+'"><a href="javascript:;" class="date">'+val+'</a><a href="javascript:;" class="close">×</a></div>');}});if(checkBoxCount) {o.parents(".profile_item").removeClass("open");o.parents(".filter_box").removeClass("open");o.parents(".create_bitlink_box").siblings(".profile_box").removeAttr("style");$(".filter_list").slideDown();removeLoading();} else {$(".filter_list").slideUp();} o.parent().hide();},filter_edittag_apply:function(o){var checkBoxCount=0;$(".filter_list").find(".filter_list_pill").remove();$(".grid_yaxis_tracker b i").removeClass("active");$(".filter_box").find(".insert").remove();if(o.parents(".filter_tags_box").hasClass("edit_open")) {$(".link_detail .filter_tags_list").empty();o.parents("dl").find("dd b").each(function(){if($(this).find("span").hasClass('checkbox_on_active')) {val=$(this).attr("data-reactid");$(".link_detail .filter_tags_list").append('<a href="javascript:;"><em>'+val+'</em><i>×</i></a>');}});profile_bg_close();} else{o.parents("dl").find("dd b").each(function(){if($(this).find("span").hasClass('checkbox_on_active')) {val=$(this).attr("data-reactid");checkBoxCount++;$(".filter_box dd.submit").before('<dd class="insert" data-reactid="'+val+'" style="display:none;">'+val+'<span class="checkbox_on_active"><i></i></span></dd>');}});if(checkBoxCount) {o.parents(".filter_tags_box").removeClass("open");$(".filter_box dt u").html(checkBoxCount);} else {$(".filter_box dt u").html('');o.parents(".filter_tags_box").removeClass("open");}} o.parent().hide();},create_bitlink:function(o){$(".profile_item").addClass("open");$(".profile_item .profile_box").css("transform","translateX(0)");$(".profile_item .create_bitlink_box").addClass("open");},create_bitlink_submit:function(o){if(o.hasClass("loading")){return false;} if($("body").find(".error_urlitem").length>0){return false;} var status=false;var val=o.parent().find("#url").val();var msg=o.parent().find("#url").attr("msg");if(!val) {var status=true;$("body").after('<div class="error_urlitem">'+msg+'</div>');$(".error_urlitem").animate({top:'100'});setTimeout(function(){$(".error_urlitem").animate({top:'0',opacity:"0"});setTimeout(function(){$(".error_urlitem").remove();},500);},1000);} else {if(!regUrl.test(val)){var status=true;$("body").after('<div class="error_urlitem">'+msg+'</div>');$(".error_urlitem").animate({top:'100'});setTimeout(function(){$(".error_urlitem").animate({top:'0',opacity:"0"});setTimeout(function(){$(".error_urlitem").remove();},500);},1000);}} if(status) {return false;} o.addClass("loading");var shortnum=randomWord(8);$(".create_bitlink_edit .copybox").find(".link").remove();$(".create_bitlink_edit .copybox").prepend('<a href="https://bitlcy.com/'+shortnum+'" class="link">http://bitlcy.com<b>/'+shortnum+'</b></a>');$(".create_bitlink_edit .linkeidt_list").find(".url").val('https://bitlcy.com/'+shortnum);$(".create_bitlink_edit").addClass("open");o.removeClass("loading");removeLoading();return false;},linkeidt:function(o){var title=o.parents(".linkeidt_list").find(".title").val();var note=o.parents(".linkeidt_list").find(".note").val();o.parents(".create_bitlink_edit").removeClass("open edit_open");o.parents(".profile_item").removeClass("open");o.parents(".create_bitlink_edit").siblings(".create_bitlink_box").removeClass("open");o.parents(".create_bitlink_edit").siblings(".profile_box").removeAttr("style");},_tracker:function(o){if($(".wrapright").find(".loading").length>0||o.parents(".clicks_box").length>0)return;$(".header .keyword").val('');o.addClass("active").parent().siblings().find("i").removeClass("active");var date=o.parent().parent().siblings(".grid_date_labels").children().eq(o.parent().index()).text();$(".filter_list_pill").remove();$(".filter_box dd").find("span").removeClass("checkbox_on_active").addClass("checkbox_on");$(".filter_list_clear").before('<div class="filter_list_pill"><a href="javascript:;" class="date">'+date+'</a><a href="javascript:;" class="close">×</a></div>');$(".filter_list").slideDown();removeLoading();},filter_clear:function(o){if($(".wrapright").find(".loading").length>0)return;$(".filter_list").slideUp();$(".header .keyword").val('');$(".grid_yaxis_tracker b i").removeClass("active");o.siblings(".filter_list_pill").remove();removeLoading();},filter_close:function(o){if($(".wrapright").find(".loading").length>0)return;var length=o.parent().parent().find(".filter_list_pill").length;$(".header .keyword").val('');$(".grid_yaxis_tracker b i").removeClass("active");$(".filter_box dd").each(function(){if($(this).attr("data-reactid")==o.parent().attr("data-reactid")) {$(this).find("span").removeClass("checkbox_on_active").addClass("checkbox_on");}});o.parent().remove();if(length==1) {$(".filter_list").slideUp();} removeLoading();},bitlist_check:function(o){if($(".wrapright").find(".loading").length>0)return;o.addClass("active").siblings().removeClass("active");$(".wrapright").append('<div class="loading" />');setTimeout(function(){$(".wrapright").find(".loading").remove();},1500);},graph_toggle:function(o){if(o.hasClass("active")) {o.parent().siblings(".performance_graph").slideDown();o.removeClass("active").text(o.attr("data"));} else {o.parent().siblings(".performance_graph").slideUp();o.addClass("active").text(o.attr("msg"));}},view_selector:function(o){var maxCountryNum=$(".highcharts_timezone .legend u").children().eq(1).children().length;var dataID=o.attr("data-id");$(".highcharts_timezone .legend strong").hide();if(o.hasClass("active")) {$(".highcharts_grid svg g").html('');o.removeClass("active");$(".highcharts_timezone .legend").find("#legend"+dataID).fadeOut();return false;} else{$(".highcharts_timezone .legend").find("#legend"+dataID).fadeIn();} o.addClass("active").siblings().removeClass("active");$(".highcharts_grid svg g.all").html('');$(".grid_yaxis_tracker b").each(function(){if($(this).parents(".clicks_box").length==0) {var fill=$(this).find("i").attr("fill");var x=$(this).find("i").offset().left;var y=$(this).find("i").offset().top-$(".grid_svg").offset().top;if(fill==1) {var height=$(".grid_yaxis_tracker").height()/$(".grid_yaxis_num i").eq(0).text();if(o.attr("data-id")==1) {if($(this).find("i").attr("channels")>0) {$(".highcharts_grid svg g.c0").append('<desc>L '+x+' '+(y+height*$(this).find("i").attr("location"))+' </desc>');} if($(this).find("i").attr("location")>0) {$(".highcharts_grid svg g.c1").append('<desc>L '+x+' '+(y+height*$(this).find("i").attr("channels"))+' </desc>');}} else {for(var i=0;i<maxCountryNum;i++){console.log(0);if($(this).find("i").attr("c"+i)>0){var color=$(".highcharts_timezone .legend strong:last-child").children().eq(i).find("em").css("backgroundColor");$('.highcharts_grid svg g.c'+i).append('<desc>L '+x+' '+(y+height*($(this).find("i").attr("clicks")-$(this).find("i").attr("c"+i)))+' </desc>');var Str=$(".highcharts_grid svg").find('.c'+i+' desc').eq(0).html();$(".highcharts_grid svg").find('.c'+i+' desc').eq(0).html(Str.replace(/L/,"M"));} $(".highcharts_grid svg g.all").append('<path fill="none" d="'+$('.highcharts_grid svg g.c'+i).text()+'" stroke="'+color+'" stroke-width="2" zIndex="1" stroke-linejoin="round" stroke-linecap="round"/>');}}}}});if(o.attr("data-id")==1){var channelStr=$(".highcharts_grid svg").find(".c0 desc").eq(0).html();var locationStr=$(".highcharts_grid svg").find(".c1 desc").eq(0).html();$(".highcharts_grid svg").find(".c0 desc").eq(0).html(channelStr.replace(/L/,"M"));$(".highcharts_grid svg").find(".c1 desc").eq(0).html(locationStr.replace(/L/,"M"));$(".highcharts_grid svg g.all").html('<path fill="none" d="'+$(".highcharts_grid svg g.c0").text()+'" stroke="'+$(".highcharts_timezone .legend u").children().eq(0).find("span").eq(0).find("em").css("backgroundColor")+'" stroke-width="2" zIndex="1" stroke-linejoin="round" stroke-linecap="round"/><path fill="none" d="'+$(".highcharts_grid svg g.c1").text()+'" stroke="'+$(".highcharts_timezone .legend u").children().eq(0).find("span").eq(1).find("em").css("backgroundColor")+'" stroke-width="2" zIndex="1" stroke-linejoin="round" stroke-linecap="round"/>');$(".highcharts_grid svg g.c1").html('');$(".highcharts_grid svg g.c0").html('');} else{var pathLength=$(".highcharts_grid svg g.all").find("path").length;$(".highcharts_grid svg g.all").find("path").eq(pathLength-maxCountryNum).prevAll().remove();$(".highcharts_grid svg g.all").html($(".highcharts_grid svg g.all").html());$(".highcharts_grid svg g.all").nextAll().html('');}},filter_tags_check:function(o){var text=o.text();removeLoading();$(".filter_list").find(".filter_list_pill").remove();$(".filter_list_clear").before('<div class="filter_list_pill" data-reactid="'+text+'"><a href="javascript:;" class="date">'+text+'</a><a href="javascript:;" class="close">×</a></div>');$(".filter_list").slideDown();},filter_tags_colse:function(o) {o.parent().remove();},edit_link:function(o){$(".profile_item").addClass("open");$(".profile_item .profile_box").css("transform","translateX(0)");$(".create_bitlink_edit").addClass("open edit_open");var date=o.parents(".tool_item").siblings(".date").text(),title=o.parents(".tool_item").siblings(".title").text(),newlink=o.parents(".tool_item").siblings(".newlink").find(".link").html(),bitlink=o.parents(".tool_item").siblings(".newlink").find(".link").attr("href");$(".create_bitlink_edit .link_copy .date").text('Created '+date);$(".create_bitlink_edit .link_copy .link").html(newlink);$(".linkeidt_list .title").val(title);$(".linkeidt_list .url").val(bitlink);$(".newlink").find(".zclip").remove();autocopy();},hide_link:function(o){var id=o.attr("id");msgTipsbox(2,'It can be found with the hidden Bitlinks filter',function(re){if(re){removeLink(o,id);}},'','Confirm','Cancel','Hide Bitlink');},select_tag:function(o){var keyword=o.val();$(".filter_tags_box dd b").hide().each(function(){o.parents("dl").find(".create_new_tag").remove();var text=$(this).text();if(text.toLowerCase().indexOf(keyword.toLowerCase())==0) {$(this).show();} if(o.parents(".filter_tags_box").hasClass("edit_open")&&keyword!=''&&keyword!=text) {o.parent().next().prepend('<b class="create_new_tag" style="display:block" data-reactid="'+keyword+'">Create new tag: '+keyword+'<span class="checkbox_on"><i></i></span></b>')} else if(o.parents(".filter_tags_box").hasClass("edit_open")&&keyword==text) {o.parents("dl").find(".create_new_tag").remove();return false;}});},edittag_link:function(o){$(".profile_item").addClass("open");$(".profile_item .profile_box").css("transform","translateX(0)");$(".filter_tags_box").addClass("open edit_open");$(".filter_tags_box dt .search_input_field").attr("placeholder","Search and Create");$(".profile_item.open .profile_header").html('Edit Tags<i>×</i>');var profileheaderHeight=$(".profile_item.open .profile_header").outerHeight();var height=$(".filter_tags_box dt").outerHeight();var submitHeight=$(".filter_tags_item dd.submit").outerHeight();var windowHeight=$(window).height();$(".filter_tags_box dd.submit").prev().css("max-height",windowHeight-3*submitHeight-height-profileheaderHeight);}}})(jQuery);$(document).on("click",".header .settings",function(){$.ShortenItem.menu_bar($(this));}).on("click",".settings_item .user",function(){$.ShortenItem.eidt_profile($(this));}).on("click",".header .filter",function(){$.ShortenItem._filter($(this));}).on("click",".filter_box dd:not('.submit')",function(){$.ShortenItem.filter_tag_check($(this));}).on("click",".filter_box .btn",function(){$.ShortenItem.filter_tag_apply($(this));}).on("click",".filter_tags_box dd b",function(){$.ShortenItem.filter_edittag_check($(this));}).on("click",".filter_tags_box .btn",function(){$.ShortenItem.filter_edittag_apply($(this));}).on("click",".header .create_bitlink",function(){$.ShortenItem.create_bitlink($(this));}).on("click",".create_bitlink_box .submit",function(){$.ShortenItem.create_bitlink_submit($(this));}).on("click",".linkeidt_list .btn",function(){$.ShortenItem.linkeidt($(this));}).on("click",".grid_yaxis_tracker b i",function(){$.ShortenItem._tracker($(this));}).on("click",".filter_list .filter_list_clear",function(){$.ShortenItem.filter_clear($(this));}).on("click",".filter_list .filter_list_pill .close",function(){$.ShortenItem.filter_close($(this));}).on("click",".bit_list li",function(){$.ShortenItem.bitlist_check($(this));}).on("click",".graph_toggle span",function(){$.ShortenItem.graph_toggle($(this));}).on("click",".view_selector span",function(){$.ShortenItem.view_selector($(this));}).on("click",".link_detail .filter_tags_list em",function(){$.ShortenItem.filter_tags_check($(this));}).on("click",".link_detail .filter_tags_list i",function(event){$.ShortenItem.filter_tags_colse($(this));}).on("click",".link_detail .tool_item .edit_link",function(){$.ShortenItem.edit_link($(this));}).on("click",".link_detail .tool_item .hide_link",function(){$.ShortenItem.hide_link($(this));}).on("input propertychange",".filter_tags_box .search_input_field",function(){$.ShortenItem.select_tag($(this));}).on("click",".link_detail .tool_item .tag_link",function(){$.ShortenItem.edittag_link($(this));});function tagBoxCount(){var tagBoxCount=0;$(".filter_tags_box b").each(function(){if($(this).find("span").hasClass('checkbox_on_active')) {val=$(this).attr("data-reactid");tagBoxCount++;$(".filter_box dd.submit").before('<dd class="insert" data-reactid="'+val+'" style="display:none;">'+val+'<span class="checkbox_on_active"><i></i></span></dd>');}});if(tagBoxCount) {$(".filter_box dt u").html(tagBoxCount);}} tagBoxCount();function profile_bg_close(){$(".profile_item").removeClass("open");$(".profile_item").find(".change_profile,.filter_box,.filter_tags_box,.create_bitlink_box,.create_bitlink_edit").removeClass("open edit_open");$(".profile_item .profile_box").removeAttr("style");$(".modal_msgbox").remove();} $(document).on("click",".profile_box .profile_header i",function(){$(this).parents(".profile_item").removeClass("open");});$(document).on("click",".change_profile .profile_header i",function(){$(this).parents(".change_profile").removeClass("open");});$(document).on("click",".profile_item .profile_bg",function(){profile_bg_close();});$(document).on("click",".filter_box .profile_header i",function(){$(this).parents(".filter_box").find("dd.submit").hide();$(this).parents(".profile_item").removeClass("open");$(this).parents(".filter_box").removeClass("open");$(this).parents(".filter_box").siblings(".profile_box").removeAttr("style");});$(document).on("click",".filter_tags_box .profile_header i",function(){$(this).parents(".filter_tags_box").removeClass("open");if($(this).parents(".filter_tags_box").hasClass("edit_open")) {$(this).parents(".profile_item").removeClass("open");$(this).parents(".filter_tags_box").siblings(".profile_box").removeAttr("style");$(this).parents(".filter_tags_box").removeClass("edit_open");} $(this).parents(".filter_tags_box").find("dd.submit").hide();});$(document).on("click",".filter_box dt",function(){var profileheaderHeight=$(this).parent().prev().outerHeight();var height=$(".filter_tags_box dt").outerHeight();var submitHeight=$(".filter_tags_item dd.submit").outerHeight();var windowHeight=$(window).height();$(this).parents(".profile_item").find(".filter_tags_box").addClass("open");$(".filter_tags_box .search_input_field").val('');$(".filter_tags_box dd b").show();$(".filter_tags_box dd.submit").prev().css("max-height",windowHeight-3*submitHeight-height-profileheaderHeight);$(".filter_tags_box dt .search_input_field").attr("placeholder","Search");});$(document).on("click",".filter_tags_box .profile_header i",function(){});$(document).on("click",".create_bitlink_box .profile_header i",function(){$(this).parents(".profile_item").removeClass("open");$(this).parents(".create_bitlink_box").removeClass("open");$(this).parents(".create_bitlink_box").siblings(".profile_box").removeAttr("style");});function removeLoading(){$(".wrapright").append('<div class="loading" />');setTimeout(function(){$(".wrapright").find(".loading").remove();},1500);} $("form#form_search").submit(function(){if($(".wrapright").find(".loading").length>0)return;$(".grid_yaxis_tracker b i").removeClass("active");var o=$(this);var status=false;var keyword=o.find(".keyword").val();if(!keyword) {var status=true;$(".filter_list").slideUp();removeLoading();} else {var status=true;$(".filter_list_pill .date").text(keyword);$(".filter_list").slideDown();removeLoading();} if(status) {return false;} return false;});$(document).on("click",".create_bitlink_edit .profile_header i",function(){if($(this).parents(".create_bitlink_edit").hasClass("edit_open")) {$(this).parents(".create_bitlink_edit").removeClass("open edit_open");$(".profile_item .profile_box").removeAttr("style");$(this).parents(".profile_item").removeClass("open");} else{$(this).parents(".create_bitlink_edit").removeClass("open");}});function modal_bg(){$(".profile_item").addClass("open");$(".profile_item .profile_box").css("transform","translateX(0)");} function modal_remove() {profile_bg_close();} function msgTipsbox(i,j,k,l,m,n,t){modal_bg();if(t=='') {t='';} else {t="<h4 class='modal_msgbox_title'>"+t+"</h4>";} $('.profile_item').append("<div class='modal_msgbox'>"+t+"<div class='modal_msgbox_msg'>"+j+"</div><div class='modal_msgbox_button'></div></div>");if(i==0)$('.modal_container .modal_msgbox_button').append("<span class='button_ok' onclick='modal_remove();'><i>OK</i></span>");if(i==1) {$('.profile_item .modal_msgbox_button').append("<span class='button_no' onclick='modal_remove();'><i>Cancel</i></span><span class='button_yes'><i>Yes</i></span>");$(document).off("click",".button_yes").on("click",".button_yes",function(){k(l);});} if(i==2) {$('.profile_item .modal_msgbox_button').append("<span class='button_yes'><i>"+m+"</i></span><span class='button_no' onclick='modal_remove();'><i>"+n+"</i></span>");$(document).off("click",".button_yes").on("click",".button_yes",function(l){if(i)k(l);});} modal_add();};function modal_add(){var modal_profileitem=$('.profile_item');var modal_content=modal_profileitem.find(".modal_msgbox");var modal_content_width=modal_content.outerWidth(true);var modal_content_height=modal_content.outerHeight(true);var window_width=$(window).outerWidth(true);var window_height=$(window).outerHeight(true);var sum=50;if(modal_content_height>=window_height-sum) {modal_content.css({marginTop:sum+'px'});} else {if((window_height-modal_content_height)/2<=sum) {modal_content.css({marginTop:sum+'px'});} else {modal_content.css({marginTop:(window_height-modal_content_height)/2+'px'});}}} $(window).resize(function(){modal_add()});function removeLink(obj,id) {var obj=$(obj);};(function($){$.fn.zclip=function(params){if(typeof params=="object"&&!params.length){var settings=$.extend({path:'ZeroClipboard.swf',copy:null,beforeCopy:null,afterCopy:null,clickAfter:true,setHandCursor:true,setCSSEffects:true},params);return this.each(function(){var o=$(this);if(o.is(':visible')&&(typeof settings.copy=='string'||$.isFunction(settings.copy))){ZeroClipboard.setMoviePath(settings.path);var clip=new ZeroClipboard.Client();if($.isFunction(settings.copy)){o.bind('zClip_copy',settings.copy);} if($.isFunction(settings.beforeCopy)){o.bind('zClip_beforeCopy',settings.beforeCopy);} if($.isFunction(settings.afterCopy)){o.bind('zClip_afterCopy',settings.afterCopy);} clip.setHandCursor(settings.setHandCursor);clip.setCSSEffects(settings.setCSSEffects);clip.addEventListener('mouseOver',function(client){o.trigger('mouseenter');});clip.addEventListener('mouseOut',function(client){o.trigger('mouseleave');});clip.addEventListener('mouseDown',function(client){o.trigger('mousedown');if(!$.isFunction(settings.copy)){clip.setText(settings.copy);}else{clip.setText(o.triggerHandler('zClip_copy'));} if($.isFunction(settings.beforeCopy)){o.trigger('zClip_beforeCopy');}});clip.addEventListener('complete',function(client,text){if($.isFunction(settings.afterCopy)){o.trigger('zClip_afterCopy');}else{if(text.length>500){text=text.substr(0,500)+"...\n\n("+(text.length-500)+" characters not shown)";} o.removeClass('hover');alert("Copied text to clipboard:\n\n "+text);} if(settings.clickAfter){o.trigger('click');}});clip.glue(o[0],o.parent()[0]);$(window).bind('load resize',function(){clip.reposition();});}});}else if(typeof params=="string"){return this.each(function(){var o=$(this);params=params.toLowerCase();var zclipId=o.data('zclipId');var clipElm=$('#'+zclipId+'.zclip');if(params=="remove"){clipElm.remove();o.removeClass('active hover');}else if(params=="hide"){clipElm.hide();o.removeClass('active hover');}else if(params=="show"){clipElm.show();}});}}})(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:'ZeroClipboard.swf',nextId:1,$:function(thingy){if(typeof(thingy)=='string')thingy=document.getElementById(thingy);if(!thingy.addClass){thingy.hide=function(){this.style.display='none';};thingy.show=function(){this.style.display='';};thingy.addClass=function(name){this.removeClass(name);this.className+=' '+name;};thingy.removeClass=function(name){var classes=this.className.split(/\s+/);var idx=-1;for(var k=0;k<classes.length;k++){if(classes[k]==name){idx=k;k=classes.length;}} if(idx>-1){classes.splice(idx,1);this.className=classes.join(' ');} return this;};thingy.hasClass=function(name){return!!this.className.match(new RegExp("\\s*"+name+"\\s*"));};} return thingy;},setMoviePath:function(path){this.moviePath=path;},dispatch:function(id,eventName,args){var client=this.clients[id];if(client){client.receiveEvent(eventName,args);}},register:function(id,client){this.clients[id]=client;},getDOMObjectPosition:function(obj,stopObj){var info={left:0,top:0,width:obj.width?obj.width:obj.offsetWidth,height:obj.height?obj.height:obj.offsetHeight};if(obj&&(obj!=stopObj)){info.left+=obj.offsetLeft;info.top+=obj.offsetTop;} return info;},Client:function(elem){this.handlers={};this.id=ZeroClipboard.nextId++;this.movieId='ZeroClipboardMovie_'+this.id;ZeroClipboard.register(this.id,this);if(elem)this.glue(elem);}};ZeroClipboard.Client.prototype={id:0,ready:false,movie:null,clipText:'',handCursorEnabled:true,cssEffects:true,handlers:null,glue:function(elem,appendElem,stylesToAdd){this.domElement=ZeroClipboard.$(elem);var zIndex=99;if(this.domElement.style.zIndex){zIndex=parseInt(this.domElement.style.zIndex,10)+1;} if(typeof(appendElem)=='string'){appendElem=ZeroClipboard.$(appendElem);}else if(typeof(appendElem)=='undefined'){appendElem=document.getElementsByTagName('body')[0];} var box=ZeroClipboard.getDOMObjectPosition(this.domElement,appendElem);this.div=document.createElement('div');this.div.className="zclip";this.div.id="zclip-"+this.movieId;$(this.domElement).data('zclipId','zclip-'+this.movieId);var style=this.div.style;style.position='absolute';style.left=''+box.left+'px';style.top=''+box.top+'px';style.width=''+box.width+'px';style.height=''+box.height+'px';style.zIndex=zIndex;if(typeof(stylesToAdd)=='object'){for(addedStyle in stylesToAdd){style[addedStyle]=stylesToAdd[addedStyle];}} appendElem.appendChild(this.div);this.div.innerHTML=this.getHTML(box.width,box.height);},getHTML:function(width,height){var html='';var flashvars='id='+this.id+'&width='+width+'&height='+height;if(navigator.userAgent.match(/MSIE/)){var protocol=location.href.match(/^https/i)?'https://':'http://';html+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+protocol+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+width+'" height="'+height+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+flashvars+'"/><param name="wmode" value="transparent"/></object>';}else{html+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+width+'" height="'+height+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+flashvars+'" wmode="transparent" />';} return html;},hide:function(){if(this.div){this.div.style.left='-2000px';}},show:function(){this.reposition();},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML='';var body=document.getElementsByTagName('body')[0];try{body.removeChild(this.div);}catch(e){;} this.domElement=null;this.div=null;}},reposition:function(elem){if(elem){this.domElement=ZeroClipboard.$(elem);if(!this.domElement)this.hide();} if(this.domElement&&this.div){var box=ZeroClipboard.getDOMObjectPosition(this.domElement);var style=this.div.style;style.left=''+box.left+'px';style.top=''+box.top+'px';}},setText:function(newText){this.clipText=newText;if(this.ready){this.movie.setText(newText);}},addEventListener:function(eventName,func){eventName=eventName.toString().toLowerCase().replace(/^on/,'');if(!this.handlers[eventName]){this.handlers[eventName]=[];} this.handlers[eventName].push(func);},setHandCursor:function(enabled){this.handCursorEnabled=enabled;if(this.ready){this.movie.setHandCursor(enabled);}},setCSSEffects:function(enabled){this.cssEffects=!!enabled;},receiveEvent:function(eventName,args){eventName=eventName.toString().toLowerCase().replace(/^on/,'');switch(eventName){case'load':this.movie=document.getElementById(this.movieId);if(!this.movie){var self=this;setTimeout(function(){self.receiveEvent('load',null);},1);return;} if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var self=this;setTimeout(function(){self.receiveEvent('load',null);},100);this.ready=true;return;} this.ready=true;try{this.movie.setText(this.clipText);}catch(e){} try{this.movie.setHandCursor(this.handCursorEnabled);}catch(e){} break;case'mouseover':if(this.domElement&&this.cssEffects){this.domElement.addClass('hover');if(this.recoverActive){this.domElement.addClass('active');}} break;case'mouseout':if(this.domElement&&this.cssEffects){this.recoverActive=false;if(this.domElement.hasClass('active')){this.domElement.removeClass('active');this.recoverActive=true;} this.domElement.removeClass('hover');} break;case'mousedown':if(this.domElement&&this.cssEffects){this.domElement.addClass('active');} break;case'mouseup':if(this.domElement&&this.cssEffects){this.domElement.removeClass('active');this.recoverActive=false;} break;} if(this.handlers[eventName]){for(var idx=0,len=this.handlers[eventName].length;idx<len;idx++){var func=this.handlers[eventName][idx];if(typeof(func)=='function'){func(this,args);}else if((typeof(func)=='object')&&(func.length==2)){func[0][func[1]](this,args);}else if(typeof(func)=='string'){window[func](this,args);}}}}};